/*
 * This file was generated by the Gradle 'init' task and customized for the QuickDraft project.
 *
 * This file sets up a Java application project for processing Word documents, converting them to PDFs using Docx4j,
 * and includes dependencies for logging, testing, and building a fat JAR.
 * For more details on building Java & JVM projects, refer to https://docs.gradle.org/8.14/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Core plugins for Java application development
    id 'java'
    id 'application' // For specifying the main class and running the application
    id 'com.github.johnrengelman.shadow' version '8.1.1' // For creating a fat JAR with all dependencies
}

repositories {
    // Use Maven Central for resolving dependencies
    mavenCentral()
}

dependencies {
    implementation 'org.apache.poi:poi:5.2.3'
    implementation 'org.apache.poi:poi-ooxml:5.2.3'
     implementation 'org.slf4j:slf4j-api:1.7.36'
    implementation 'org.slf4j:slf4j-simple:1.7.36'
    implementation 'org.slf4j:slf4j-simple:1.7.36'
    implementation 'org.apache.logging.log4j:log4j-api:2.23.1'
    implementation 'org.apache.logging.log4j:log4j-core:2.23.1'
    implementation 'org.apache.logging.log4j:log4j-slf4j2-impl:2.23.1'
    implementation 'org.apache.xmlgraphics:fop:2.6'
    implementation 'org.apache.avalon.framework:avalon-framework-api:4.3.1'
    implementation 'org.apache.avalon.framework:avalon-framework-impl:4.3.1'
    implementation 'org.docx4j:docx4j-JAXB-ReferenceImpl:8.3.4'
    implementation 'org.docx4j:docx4j-export-fo:8.3.4'
    implementation 'com.lowagie:itext:2.1.7'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.3'
}
java {
    // Set Java compatibility to version 1.8 as specified in previous versions
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

application {
    // Define the main class for the application
    mainClass = 'org.example.QuickDraft'
}

shadowJar {
    // Name of the fat JAR file
    archiveFileName = 'QuickDraft.jar'
    manifest {
        attributes 'Main-Class': 'org.example.QuickDraft'
    }
}

// Ensure the regular JAR task is disabled since we're using shadowJar
jar {
    enabled = false
}

// Configure test tasks to use JUnit 5
tasks.withType(Test) {
    useJUnitPlatform()
}

// Optional: Add a task to clean the build directory before building
tasks.named('clean') {
    doLast {
        println 'Cleaning build directory...'
    }
}

// Optional: Add a task to print a message after the build
tasks.named('build') {
    doLast {
        println 'Build completed successfully! Fat JAR created at build/libs/QuickDraft.jar'
    }
}
